<!DOCTYPE html><html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quran Kareem - English</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Cairo&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: #f4f4f4;
            color: #222;
            font-size: 18px;
        }
        .header {
            background-color: #1e3a8a;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .header h1 {
            font-size: 1.5rem;
        }
        .header i {
            cursor: pointer;
        }
        .container {
            padding: 1rem 2rem;
            max-width: 900px;
            margin: auto;
        }
        .verse {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            padding: 1rem;
            transition: background 0.3s;
        }
        .verse:hover {
            background-color: #f0f4ff;
        }
        .arabic {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            text-align: right;
        }
        .translation, .urdu {
            margin-top: 0.5rem;
        }
        .verse-controls {
            margin-top: 0.75rem;
            display: flex;
            gap: 1rem;
        }
        .verse-controls button {
            background: #1e3a8a;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            cursor: pointer;
        }
        .verse-controls button:hover {
            background: #3b82f6;
        }
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }
        .theme-toggle, .text-size-control {
            cursor: pointer;
        }
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #1e3a8a;
            color: white;
            padding: 0.75rem;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="header">
        <i class="fas fa-chevron-left" onclick="navigateSurah(-1)"></i>
        <h1 id="surah-name">Surah</h1>
        <i class="fas fa-chevron-right" onclick="navigateSurah(1)"></i>
    </div><div class="top-bar">
    <div class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
    </div>
    <div class="text-size-control">
        <i class="fas fa-plus" onclick="changeTextSize(1)"></i>
        <i class="fas fa-minus" onclick="changeTextSize(-1)"></i>
    </div>
</div>

<div class="container" id="verses-container"></div>

<div class="scroll-top" onclick="scrollToTop()">
    <i class="fas fa-arrow-up"></i>
</div>

<script>
    let currentIndex = parseInt(new URLSearchParams(window.location.search).get('index')) || 1;

    async function loadSurah(index) {
        try {
            const [arabic, en, ur] = await Promise.all([
                fetch(`https://raw.githubusercontent.com/itzfew/Quran-Online/main/source/surah/surah_${index}.json`).then(r => r.json()),
                fetch(`https://raw.githubusercontent.com/itzfew/Quran-Online/main/source/translation/en/en_translation_${index}.json`).then(r => r.json()),
                fetch(`https://raw.githubusercontent.com/itzfew/Quran-Online/main/source/translation/ur/t_surah_${String(index).padStart(3, '0')}.json`).then(r => r.json())
            ]);
            displaySurah(arabic, en, ur);
        } catch (e) {
            console.error('Error loading data:', e);
        }
    }

    function displaySurah(ar, en, ur) {
        document.getElementById('surah-name').innerText = ar.name;
        const container = document.getElementById('verses-container');
        container.innerHTML = '';
        for (let i = 1; i <= ar.count; i++) {
            const verse = document.createElement('div');
            verse.classList.add('verse');
            verse.innerHTML = `
                <div class="arabic">${ar.verse[`verse_${i}`]} <span>(${i})</span></div>
                <div class="translation">${en.verse[`verse_${i}`]}</div>
                <div class="urdu">${ur.data.find(v => v.aya == i)?.text || ''}</div>
                <div class="verse-controls">
                    <button onclick="shareVerse(${i})">Share</button>
                    <button onclick="viewVerse(${i})">View</button>
                </div>
            `;
            container.appendChild(verse);
        }
    }

    function toggleTheme() {
        document.body.classList.toggle('dark-mode');
        localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    }

    function changeTextSize(delta) {
        const currentSize = parseInt(getComputedStyle(document.body).fontSize);
        const newSize = currentSize + delta;
        document.body.style.fontSize = `${newSize}px`;
        localStorage.setItem('textSize', newSize);
    }

    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function navigateSurah(delta) {
        let newIndex = currentIndex + delta;
        if (newIndex < 1) newIndex = 1;
        if (newIndex > 114) newIndex = 114;
        window.location.href = `?index=${newIndex}`;
    }

    function shareVerse(id) {
        const verse = document.querySelector(`.verse:nth-child(${id})`).innerText;
        navigator.clipboard.writeText(verse).then(() => alert("Verse copied!"));
    }

    function viewVerse(id) {
        window.location.href = `verse.html?surah=${currentIndex}&verse=${id}`;
    }

    // On load settings
    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('darkMode') === 'true';
        const savedFontSize = localStorage.getItem('textSize');
        if (savedTheme) document.body.classList.add('dark-mode');
        if (savedFontSize) document.body.style.fontSize = `${savedFontSize}px`;
        loadSurah(currentIndex);
    });
</script>

</body>
</html>
