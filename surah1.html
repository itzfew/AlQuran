<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quran Kareem (Ar)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        async function generateVerseImage(verseId) {
            const verseText = document.getElementById(`verse-${verseId}`).innerText;
            
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            // Background
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Text settings
            ctx.fillStyle = "white";
            ctx.font = "20px Arial";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            
            // Split text into multiple lines
            const lines = wrapText(ctx, verseText, 400);
            let startY = 200;
            lines.forEach(line => {
                ctx.fillText(line, canvas.width / 2, startY);
                startY += 30;
            });
            
            // Convert to image
            const image = canvas.toDataURL("image/png");
            
            // Create a link to download the image
            const link = document.createElement('a');
            link.href = image;
            link.download = `verse_${verseId}.png`;
            link.click();
        }
        
        function wrapText(ctx, text, maxWidth) {
            const words = text.split(' ');
            let lines = [];
            let currentLine = words[0];
            
            for (let i = 1; i < words.length; i++) {
                const testLine = currentLine + " " + words[i];
                const metrics = ctx.measureText(testLine);
                if (metrics.width > maxWidth) {
                    lines.push(currentLine);
                    currentLine = words[i];
                } else {
                    currentLine = testLine;
                }
            }
            lines.push(currentLine);
            return lines;
        }
    </script>
</head>
<body>
    <div id="content"></div>
    <script>
        function displayVerses() {
            const content = document.getElementById('content');
            content.innerHTML = '';
            
            for (let i = 1; i <= 5; i++) { // Example with 5 verses
                const verseDiv = document.createElement('div');
                verseDiv.classList.add('verse');
                verseDiv.setAttribute('id', `verse-${i}`);
                verseDiv.innerText = `Verse ${i}: Example Quranic text`;
                
                const generateImageButton = document.createElement('button');
                generateImageButton.innerText = "Generate Image";
                generateImageButton.onclick = () => generateVerseImage(i);
                
                verseDiv.appendChild(generateImageButton);
                content.appendChild(verseDiv);
            }
        }
        
        displayVerses();
    </script>
</body>
</html>
